<header class="bg-white">
    <nav class="mx-auto flex max-w-7xl items-center justify-between p-6 lg:px-8" aria-label="Global">
        <div class="flex lg:flex-1">
            <a href="#" class="-m-1.5 p-1.5">
                <span class="sr-only">Ghibli Store</span>
                <img class="h-10 w-auto" src="https://popahead.com/wp-content/uploads/2023/01/kodama-14.5x9.7.png" alt="">
            </a>
        </div>

        <div class="hidden lg:flex lg:gap-x-12">
            <a href="/views/products" class="text-sm font-semibold leading-6 text-gray-900">Products</a>

            {{#if (eq @root.user.role "ADMIN_ROLE")}}
                <a href="/views/realtimeproducts" class="text-sm font-semibold leading-6 text-gray-900">Add products</a>
            {{/if}}

            {{#if @root.user}}
                <a href="/views/carts/6569232dfd90f493970a65cd" class="text-sm font-semibold leading-6 text-gray-900">Cart</a>
                <a href="/chat" class="text-sm font-semibold leading-6 text-gray-900">Chat</a>
            {{/if}}
        </div>
        <div class="hidden lg:flex lg:flex-1 lg:justify-end">
            {{#if @root.user}}
                <a href="#" onclick="logout(); return false;" class="text-sm font-semibold leading-6 text-gray-900">Log out <span aria-hidden="true">&rarr;</span></a>
            {{else}}
                <a href="/views/login" class="text-sm font-semibold leading-6 text-gray-900">Log in <span aria-hidden="true">&rarr;</span></a>
            {{/if}}
        </div>
    </nav>
</header>

<script>
    const logout = async () => {
        const response = await fetch('/api/users/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        });
        const data = await response.json();
        if (data.message) {
            window.location.href = '/views/login';
        }

        return false;
    }
</script>